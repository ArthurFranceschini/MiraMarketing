---
interface Props {
  lang: 'pt' | 'es';
}

const { lang } = Astro.props;

import ptAbout from '../i18n/pt/about.json';
import esAbout from '../i18n/es/about.json';

const t = lang === 'pt' ? ptAbout : esAbout;

const clients = [
  { name: 'Cliente 1', logo: '/clients/client-1.svg' },
  { name: 'Cliente 2', logo: '/clients/client-2.svg' },
  { name: 'Cliente 3', logo: '/clients/client-3.svg' },
  { name: 'Cliente 4', logo: '/clients/client-4.svg' },
  { name: 'Cliente 5', logo: '/clients/client-5.svg' },
  { name: 'Cliente 6', logo: '/clients/client-6.svg' },
  { name: 'Cliente 7', logo: '/clients/client-7.svg' },
  { name: 'Cliente 8', logo: '/clients/client-8.svg' },
];
---

<section 
  id="sobre" 
  class="px-8 py-16 md:px-32 md:py-32" 
  aria-labelledby="about-heading"
>
  
  <div class="text-center">
    
    <h2 
      id="about-heading" 
      class="text-2xl md:text-6xl font-bold fade-in"
    >
      <span class="bg-linear-to-r from-[#0004FF] to-[#FF0A0A] bg-clip-text leading-tight text-transparent">{t.highlight}</span>
    </h2>
    
    <p class="text-sm md:text-2xl font-bold mt-4 md:mt-8 fade-in">{t.description1}</p>
    
    <p class="text-sm md:text-2xl font-bold mt-4 md:mt-8 fade-in">{t.description2}</p>
    
    <p class="text-sm md:text-2xl font-bold mt-4 md:mt-8 fade-in">{t.description3}</p>
    
  </div>

  <!-- Carrossel de logos -->
    <div 
    class="mt-8 md:mt-16 overflow-hidden" 
    role="region" 
    aria-label={t.clientsLabel}
        >
    <div class="carousel-track">
    {clients.map((client) => (
      <img 
        src={client.logo} 
        alt={`Logo ${client.name}`}
        width="120"
        height="48"
        loading="lazy"
        decoding="async"
        class="h-12 w-auto grayscale opacity-50 hover:grayscale-0 hover:opacity-100 transition-all duration-300 shrink-0"
        />
        ))}
        {clients.map((client) => (
        <img 
        src={client.logo} 
        alt=""
        aria-hidden="true"
        width="120"
        height="48"
        loading="lazy"
        decoding="async"
        class="h-12 w-auto grayscale opacity-50 hover:grayscale-0 hover:opacity-100 transition-all duration-300 shrink-0"
        />
        ))}
    </div>
    </div>


  <!-- CTA -->
  <div class="mt-8 md:mt-16 flex justify-center fade-in">
    <a 
      href={`/${lang}/${t.ctaLink}`} 
      class="cta-button relative rounded-md inline-block"
      aria-label={t.ctaAriaLabel}
    >
      <span class="flex items-center justify-center px-8 py-3 rounded-md font-bold text-base md:text-lg">
        {t.ctaText}
      </span>
    </a>
  </div>

</section>

<style>
  .cta-button {
    position: relative;
    background: transparent;
  }

  .cta-button::before {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: inherit;
    padding: 2px;
    background: linear-gradient(to right, #0004FF, #FF0A0A);
    -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
    -webkit-mask-composite: xor;
    mask-composite: exclude;
    pointer-events: none;
  }

  .carousel-track {
    display: flex;
    gap: 3rem;
    width: fit-content;
    animation: scroll 20s linear infinite;
  }

  .carousel-track:hover {
    animation-play-state: paused;
  }

  @keyframes scroll {
    0% {
      transform: translateX(0);
    }
    100% {
      transform: translateX(-50%);
    }
  }

  .fade-in {
    opacity: 0;
    transform: translateY(-1.25rem);
    transition: opacity 0.6s ease-out, transform 0.6s ease-out;
  }

  .fade-in.visible {
    opacity: 1;
    transform: translateY(0);
  }
</style>

<script>
  const observer = new IntersectionObserver(
    (entries) => {
      entries.forEach((entry, index) => {
        if (entry.isIntersecting) {
          setTimeout(() => {
            entry.target.classList.add('visible');
          }, index * 100);
        }
      });
    },
    { threshold: 0.1 }
  );

  document.querySelectorAll('.fade-in').forEach((el) => {
    observer.observe(el);
  });
</script>